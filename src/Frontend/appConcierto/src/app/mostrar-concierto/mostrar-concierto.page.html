<ion-header>
  <ion-toolbar>

    <ion-buttons slot="start">
      <ion-button fill="clear" routerLink="/home">
        <ion-icon color="black" name="arrow-back" slot="start"></ion-icon>
        {{ 'VOLVER' | translate }}
      </ion-button>
    </ion-buttons>

    <ion-title class="ion-text-center">
      {{ concierto?.nombre }}
    </ion-title>


    <ion-buttons slot="end">
      <ion-button fill="clear" size="small" (click)="cambiarIdioma('es')">ES</ion-button>
      <ion-button fill="clear" size="small" (click)="cambiarIdioma('en')">EN</ion-button>
    </ion-buttons>
    
    <ion-buttons slot="end">
      <ion-toggle [checked]="modoOscuroActivado" (ionChange)="darkPaletteToggleChange($event)">
        {{ 'MODO_OSCURO' | translate }}
      </ion-toggle>
    </ion-buttons>
    

  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <ion-card *ngIf="concierto">
    <ion-grid>
      <ion-row>
        <ion-col size="6">
          <div class="carousel-container">
            <div class="carousel-slides">
              <div class="carousel-slide" *ngFor="let archivo of concierto.archivosMultimedia; let i = index"
                [class.active]="i === activeIndex">
                <img *ngIf="archivo.tipo.startsWith('image/')" [src]="getSrcArchivo(archivo)" />
                <video *ngIf="archivo.tipo.startsWith('video/')" [src]="getSrcArchivo(archivo)" controls></video>
              </div>
            </div>

            <button class="prev-btn" (click)="prevSlide()">&#10094;</button>
            <button class="next-btn" (click)="nextSlide()">&#10095;</button>
          </div>

          <div class="ion-padding-top">
            <h3>{{ 'DETALLES_CONCIERTO' | translate }}</h3>
            <p><strong>{{ 'FECHA' | translate }}:</strong> {{ concierto.fecha | date:'short' }}</p>
            <p><strong>{{ 'LUGAR' | translate }}:</strong> {{ concierto.lugar }}</p>
            <p>{{ concierto.descripcion }}</p>
          </div>
        </ion-col>

        <ion-col size="6">
          <h3 class="ion-text-center">{{ 'CATEGORIAS_ASIENTO' | translate }}</h3>
          <table class="tabla-con-bordes ion-text-center" style="width: 100%;">
            <thead>
              <tr>
                <th>{{ 'NOMBRE' | translate }}</th>
                <th>{{ 'PRECIO' | translate }}</th>
                <th>{{ 'CANTIDAD' | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let cat of concierto.categoriasAsiento">
                <td>{{ cat.nombre }}</td>
                <td>{{ cat.precio | currency:'CRC'}}</td>
                <td>{{ cat.cantidad }}</td>
              </tr>
            </tbody>
          </table>

          <ion-button *ngIf="concierto.venta?.estado === 'Activo'" class="ion-margin-top" shape="round" expand="full"
            (click)="irAReserva(concierto.id)">
            {{ 'RESERVAR' | translate }}
          </ion-button>

          <ion-button *ngIf="concierto.venta?.estado === 'Inactivo'" class="ion-margin-top" shape="round" expand="full"
            (click)="mostrarAlerta('proximamente')">
            {{ 'PROXIMAMENTE_EN_VENTA' | translate }}
          </ion-button>

          <ion-button *ngIf="concierto.venta?.estado === 'Finalizado'" class="ion-margin-top" shape="round"
            expand="full" (click)="mostrarAlerta('finalizado')">
            {{ 'VENTA_FINALIZADA' | translate }}
          </ion-button>

        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>

</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-title class="ion-text-center">Â© 2025. {{ 'TODOS_DERECHOS_RESERVADOS' | translate }}</ion-title>
  </ion-toolbar>
</ion-footer>
